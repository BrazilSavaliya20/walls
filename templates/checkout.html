<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Checkout - Wall Craft</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
  <style>
    /* Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background: #0d0d0d;
      color: #f4e7c1;
      font-family: 'Segoe UI', sans-serif;
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Navbar */
    header.navbar {
      background: #000;
      padding: 16px 22px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    
    .navbar .logo {
      font-size: 22px;
      font-weight: bold;
      color: #fff;
    }
    
    .navbar .logo span {
      color: #d4af37;
    }

    #navMenu ul {
      list-style: none;
      display: flex;
      gap: 22px;
    }
    
    #navMenu ul li a {
      text-decoration: none;
      color: #fff;
      font-size: 15px;
      font-weight: 500;
      transition: 0.3s;
    }
    
    #navMenu ul li a:hover,
    #navMenu ul li a.active {
      color: #d4af37;
    }

    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      gap: 5px;
    }
    
    .hamburger span {
      width: 28px;
      height: 3px;
      background: #fff;
      border-radius: 4px;
    }

    /* Checkout Container */
    .checkout-container {
      max-width: 1000px;
      margin: 40px auto;
      background: #1a1a1a;
      padding: 28px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.7);
    }
    
    h2 {
      text-align: center;
      margin-bottom: 25px;
      color: #d4af37;
      font-size: 24px;
    }

    /* Cart Table */
    .cart-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 25px;
    }
    
    .cart-table th,
    .cart-table td {
      padding: 12px;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .cart-table th {
      background: #222;
      color: #d4af37;
      font-size: 14px;
      text-transform: uppercase;
    }
    
    .cart-img {
      width: 70px;
      height: auto;
      border-radius: 8px;
    }
    
    .total-section {
      text-align: right;
      font-size: 18px;
      margin: 12px 0 20px;
      font-weight: bold;
      color: #d4af37;
    }

    /* Form */
    form.order-form {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    
    form.order-form label {
      font-weight: 600;
      font-size: 1rem;
      color: #d4af37;
    }
    
    form.order-form input,
    form.order-form textarea {
      width: 100%;
      padding: 12px;
      border-radius: 6px;
      border: none;
      background: #333;
      color: #f5f5f5;
      font-size: 1rem;
    }
    
    form.order-form button {
      width: 100%;
      background: linear-gradient(135deg, #d4af37, #b8860b);
      color: #000;
      border: none;
      padding: 14px;
      border-radius: 8px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: 0.3s;
    }
    
    form.order-form button:hover {
      background: linear-gradient(135deg, #e6c94d, #c99700);
    }

    /* QR Code Section */
    .qr-section {
      text-align: center;
      margin-top: 30px;
    }
    
    .qr-section h2 {
      color: #d4af37;
      margin-bottom: 12px;
      font-size: 20px;
      text-shadow: 0 0 8px rgba(212,175,55,0.4);
    }
    
    .qr-section img {
      width: 100%;
      max-width: 220px;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(212,175,55,0.4);
      display: block;
      margin: 0 auto;
    }

    /* Footer */
    footer {
      background: #111;
      color: #bbb;
      padding: 60px 6% 25px;
      font-size: 14px;
      margin-top: 80px;
    }
    
    .footer-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 40px;
      margin-bottom: 30px;
    }
    
    .footer-about h3 {
      font-size: 26px;
      font-weight: 900;
      color: #f5f5f5;
      text-transform: uppercase;
      text-shadow: 0 0 12px rgba(212,175,55,0.4);
    }
    
    .footer-about h3 span {
      color: #d4af37;
      text-shadow: 0 0 12px #d4af37;
    }
    
    .footer-about p {
      margin-top: 10px;
      color: #aaa;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .footer-links h4,
    .footer-contact h4,
    .footer-social h4 {
      color: #f4e7c1;
      margin-bottom: 12px;
      font-size: 16px;
    }
    
    .footer-links ul {
      list-style: none;
      padding: 0;
    }
    
    .footer-links ul li {
      margin-bottom: 8px;
    }
    
    .footer-links ul li a {
      text-decoration: none;
      color: #ccc;
      transition: all 0.3s ease;
    }
    
    .footer-links ul li a:hover {
      color: #d4af37;
      text-shadow: 0 0 8px #d4af37;
    }
    
    .footer-contact p {
      margin: 6px 0;
      color: #ccc;
    }
    
    .footer-social .social-icons {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .footer-social .social-icons a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: #222;
      color: #d4af37;
      font-size: 18px;
      transition: all 0.3s ease;
      text-decoration: none;
    }
    
    .footer-social .social-icons a:hover {
      background: #d4af37;
      color: #111;
      box-shadow: 0 0 12px #d4af37;
    }
    
    .footer-bottom {
      text-align: center;
      border-top: 1px solid #333;
      padding-top: 15px;
      color: #888;
      font-size: 13px;
    }
    
    .footer-bottom span {
      color: #d4af37;
      font-weight: bold;
    }

    .footer-policies {
      background: #181818;
      padding: 16px 20px;
      border-radius: 12px;
      box-shadow: inset 0 0 15px rgba(212, 175, 55, 0.3);
    }
    
    .footer-policies h4 {
      color: #d4af37;
      font-weight: 700;
      font-size: 18px;
      margin-bottom: 14px;
      border-bottom: 1px solid #b88e2f;
      padding-bottom: 6px;
      letter-spacing: 1px;
    }
    
    .footer-policies ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    
    .footer-policies ul li {
      margin: 10px 0;
    }
    
    .footer-policies ul li a {
      color: #f4e7c1;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
      font-size: 15px;
    }
    
    .footer-policies ul li a:hover {
      color: #b88e2f;
      text-shadow: 0 0 6px #b88e2f;
    }

    /* Responsive Design */
    @media (max-width: 992px) {
      .checkout-container {
        margin: 25px;
        padding: 20px;
      }
    }

    @media (max-width: 768px) {
      .hamburger {
        display: flex;
      }
      
      #navMenu {
        display: none;
        width: 100%;
      }
      
      #navMenu.active {
        display: block;
      }
      
      #navMenu ul {
        flex-direction: column;
        gap: 14px;
        padding: 12px 0;
        text-align: center;
        background: #000;
      }
      
      .cart-table thead {
        display: none;
      }
      
      .cart-table tr {
        display: block;
        margin-bottom: 15px;
        border: 1px solid #333;
        border-radius: 8px;
        padding: 10px;
        background: #111;
      }
      
      .cart-table td {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border: none;
        font-size: 14px;
      }
      
      .cart-table td::before {
        content: attr(data-label);
        font-weight: bold;
        color: #d4af37;
      }
      
      .cart-img {
        max-width: 60px;
        max-height: 60px;
        width: auto;
        height: auto;
        object-fit: contain;
        border-radius: 6px;
        display: block;
        margin: 0 auto;
      }
      
      .footer-container {
        grid-template-columns: 1fr 1fr;
      }
    }

    @media (max-width: 576px) {
      .footer-container {
        grid-template-columns: 1fr;
        text-align: center;
      }
      
      .footer-social .social-icons {
        justify-content: center;
      }
    }
  </style>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>

<header class="navbar">
  <a href="{{ url_for('home') }}" style="display:flex; align-items:center; gap:10px;">
    <img src="{{ url_for('static', filename='images/logo.jpg') }}" alt="Wall Craft Logo" style="height:50px; border-radius:50%;">
    <div class="logo">Wall<span>Crafts</span></div>
  </a>
  <div class="hamburger" onclick="toggleMenu(this)">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <nav id="navMenu">
    <ul>
      <li><a href="{{ url_for('home') }}" class="{{ 'active' if request.endpoint == 'home' else '' }}">Home</a></li>
      <li><a href="{{ url_for('shop') }}" class="{{ 'active' if request.endpoint == 'shop' else '' }}">Shop</a></li>
      <li><a href="{{ url_for('about') }}" class="{{ 'active' if request.endpoint == 'about' else '' }}">About</a></li>
      <li><a href="{{ url_for('cart') }}" class="{{ 'active' if request.endpoint == 'cart' else '' }}">Cart</a></li>
      <li><a href="{{ url_for('contact') }}" class="{{ 'active' if request.endpoint == 'contact' else '' }}">Contact</a></li>
    </ul>
  </nav>
</header>

<script>
  function toggleMenu(x) {
    x.classList.toggle("active");
    document.getElementById("navMenu").classList.toggle("active");
  }
</script>

<div class="checkout-container">
  <h2>Order Summary</h2>
  {% if cart_items %}
  <table class="cart-table">
    <thead>
      <tr>
        <th>Preview</th>
        <th>Product</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      {% for item in cart_items %}
      <tr>
        <td data-label="Preview">
          <img src="{{ item.img }}" alt="{{ item.name }}" class="cart-img">
        </td>
        <td data-label="Product">{{ item.name }}</td>
        <td data-label="Price">₹{{ item.price }}</td>
        <td data-label="Qty">{{ item.qty }}</td>
        <td data-label="Subtotal">₹{{ item.subtotal }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <div class="total-section">Total: ₹{{ total }}</div>
  {% else %}
  <p style="text-align:center; color:#bbb;">Your cart is empty.</p>
  {% endif %}

  <h2>Shipping Details</h2>
  <form id="paymentForm" method="POST" action="{{ url_for('process_order') }}" class="order-form">
    <label for="name">Full Name *</label>
    <input type="text" name="name" id="name" required>

    <label for="mobile">Mobile Number *</label>
    <input type="tel" name="mobile" id="mobile" required pattern="[0-9]{10}" title="Enter 10 digit mobile number">

    <label for="email">Email Address (Optional)</label>
    <input type="email" name="email" id="email">

    <label for="address">Shipping Address *</label>
    <textarea name="address" id="address" rows="4" required></textarea>

    <!-- Hidden fields for Razorpay -->
    <input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id">
    <input type="hidden" name="razorpay_order_id" id="razorpay_order_id" value="{{ razorpay_order_id }}">
    <input type="hidden" name="razorpay_signature" id="razorpay_signature">

    <button type="submit" id="rzp-button">Place Order</button>
  </form>
</div>

<div class="qr-section">
  <h2>Or Scan QR Code to Pay</h2>
  <img src="{{ url_for('static', filename='images/qr_code.jpg') }}" alt="Payment QR Code">
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const razorpayKeyId = "{{ razorpay_key_id }}";
    const razorpayOrderId = "{{ razorpay_order_id }}";
    const amountInPaise = {{ (total | int) * 100 }};

    const rzpOptions = {
      key: razorpayKeyId,
      amount: amountInPaise,
      currency: "INR",
      name: "Wall Craft",
      description: "Order Payment",
      order_id: razorpayOrderId,
      handler: function (response) {
        document.getElementById('razorpay_payment_id').value = response.razorpay_payment_id;
        document.getElementById('razorpay_order_id').value = response.razorpay_order_id;
        document.getElementById('razorpay_signature').value = response.razorpay_signature;
        document.getElementById('paymentForm').submit();
      },
      prefill: {
        name: document.getElementById('name') ? document.getElementById('name').value : '',
        email: document.getElementById('email') ? document.getElementById('email').value : '',
        contact: document.getElementById('mobile') ? document.getElementById('mobile').value : ''
      },
      theme: { color: "#d4af37" }
    };

    const rzp = new Razorpay(rzpOptions);

    const form = document.getElementById('paymentForm');
    form.addEventListener('submit', function (e) {
      e.preventDefault();
      rzp.open();
    });
  });
</script>

<footer>
  <div class="footer-container">
    <div class="footer-about">
      <h3>Wall<span>Craft</span></h3>
      <p>Illuminating art with elegance and luxury. Handcrafted LED Wall Craft wall decor made to inspire your space.</p>
    </div>
    <div class="footer-links">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="{{ url_for('home') }}">Home</a></li>
        <li><a href="{{ url_for('shop') }}">Shop</a></li>
        <li><a href="{{ url_for('about') }}">About</a></li>
        <li><a href="{{ url_for('cart') }}">Cart</a></li>
        <li><a href="{{ url_for('contact') }}">Contact</a></li>
      </ul>
    </div>
    <div class="footer-policies">
      <h4>Policies</h4>
      <ul>
        <li><a href="{{ url_for('cancellation_refund') }}">Cancellation and Refund</a></li>
        <li><a href="{{ url_for('privacy_policy') }}">Privacy Policy</a></li>
        <li><a href="{{ url_for('terms_conditions') }}">Terms and Conditions</a></li>
        <li><a href="{{ url_for('shipping_policy') }}">Shipping Policy</a></li>
      </ul>
    </div>
    <div class="footer-contact">
      <h4>Contact Us</h4>
      <p>📍 517- Hilltown Land Mark, Nr. Das Khaman, Nikol, Ahmedabad, 382350</p>
      <p>📞 +91 94099 1047</p>
      <p>📧 jkd@gmail.com</p>
    </div>
    <div class="footer-social">
      <h4>Follow Us</h4>
      <div class="social-icons">
        <a href="https://instagram.com/wall_craft_design_" target="_blank" aria-label="Instagram">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://facebook.com/profile.php?id=100089059140" target="_blank" aria-label="Facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
        <a href="https://youtube.com/channel/yourchannelid" target="_blank" aria-label="YouTube">
          <i class="fab fa-youtube"></i>
        </a>
        <a href="https://wa.me/91940991047" target="_blank" aria-label="WhatsApp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 <span>Wall Craft</span>. All rights reserved.</p>
  </div>
</footer>

</body>
</html>